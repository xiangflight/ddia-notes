# 第一章 可靠性、可扩展性 和 可维护性

## 引言

当今很多应用程序都是数据密集型( **data-intensive** )的，而非计算密集型( **compute-intensive** )的。

典型的数据密集型应用通常由许多标准组件构成，这些标准组件提供的功能如下：

- 数据库：存放数据的地方，以便各个应用可以访问到数据
- 缓存：记住一些开销昂贵的操作的结果，以加快读取速度
- 搜索索引：允许用户根据关键字查询，搜索数据，过滤各种数据
- 流处理：向其他进程发送消息，进行异步处理
- 批处理：定期处理大批量累积的数据
- 等...

一个可能的由多个组件构成的数据系统的架构如下，其中包括：数据库、缓存、全文搜索、消息队列......

![](/Users/xiang/Desktop/ddia-notes/notes/img/fig1-1.png)



## 可靠性

对于软件来说，可靠性意味着：

- 应用程序表现出用户所期望的功能
- 允许用户犯错，或以不当的方式使用软件
- 在预期的负载和数据量的情况下，表现出良好的性能
- 能防止未经授权的访问和滥用



故障不等同失效。

- 故障( **fault** )：系统的一部分状态偏离其标准

- 失效( **failure** )：系统作为一个整体，停止向用户提供服务



可以恢复的故障种类有：

- 硬件故障：硬盘的平均故障时间(**MTTF**：mean time to failture) 约为 10 年到 50 年
- 软件错误
- 人为错误



## 可扩展性

可扩展性：用来描述系统应对负载增长能力的术语

可扩展性不是空谈的，可以从如下问题着手：

- 如果系统以特定方式增长，如何应对这种增长？
- 如何增加计算资源来处理额外的负载？



### 描述负载

负载可以用下面几种方式描述：

-  每秒向 Web 服务器发出的请求
- 数据库的读写比率
- 聊天室中同时活跃的用户量
- 缓存命中率
- 等等

需要根据具体的应用场景来分析。



### 描述性能

可以描述负载后，就可以从以下两个角度考虑性能：

1. 增加负载参数，若保持系统资源（CPU、内存、网络带宽等）不变时，系统性能会受什么影响？
2. 增加负载参数，若希望保持性能不变时，需要增加多少系统资源？



## 应对负载

- 纵向扩展，也称垂直扩展 (vertical scaling)
- 横向扩展，也称水平扩展（horizontal scaling）



## 可维护性

### 可操作性

便于运维团队保持系统平稳运行。



### 简单性

从系统中尽可能多地消除复杂度，使新的开发人员能轻松理解系统。



### 可演化性（可扩展性、可修改性或可塑性）

工程师在未来能轻松地修改系统，为新的应用场景做适配。